{"source":2,"revision":68,"description":null,"createdBy":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"createdOn":"2020-03-02T22:06:00.143Z","modifiedBy":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"modifiedOn":"2020-03-18T18:13:10.570Z","isDeleted":false,"lastRelease":{"id":89,"name":"Release-70","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":3,"projectReference":null,"_links":{}},"createdOn":"2020-03-18T18:15:26.437Z","createdBy":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"variables":{},"variableGroups":[],"environments":[{"id":4,"name":"dev","rank":1,"owner":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"variables":{"EnvironmentName":{"value":"dev-01"},"ResourceGroupName":{"value":"modern-data-$(EnvironmentName)"},"ResourceRegion":{"value":"East US"},"ResourceRegionShort":{"value":"eastus"},"WarehouseAdminPassword":{"value":null,"isSecret":true},"WarehouseAdminUserName":{"value":"sql.admin"},"WarehouseDatabaseName":{"value":"AdventureWorksDW"},"WarehouseServerFqdn":{"value":"sql-$(EnvironmentName).database.windows.net"},"WarehouseServerName":{"value":"sql-$(EnvironmentName)"},"WarehouseSkuName":{"value":"DataWarehouse"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":14},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":15}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":36,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Logical Server","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-serverName $(WarehouseServerName) -administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -enableADS false -allowAzureIPs true -connectionType \"Default\" -location \"$(ResourceRegionShort)\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Resume Provisioned SQL Pool if it Exists","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nResume-AzSqlDatabase –ResourceGroupName \"$(ResourceGroupName)\" –ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\"","ScriptArguments":"","errorActionPreference":"silentlyContinue","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Provisioned SQL Pool","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlPool/template.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -databaseName $(WarehouseDatabaseName) -skuName $(WarehouseSkuName) -location $(ResourceRegionShort) -serverName $(WarehouseServerName) -version 12.0 -collation SQL_Latin1_General_CP1_CI_AS -allowAzureIps true -databaseTags {} -serverTags {}","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Create Point in Time Restore","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nNew-AzSqlDatabaseRestorePoint -ResourceGroupName \"$(ResourceGroupName)\" -ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\" -RestorePointLabel \"Release-$(Build.BuildId)-RestorePoint\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Run Pre-Compare Script","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"$(WarehouseServerFqdn)","DataWarehouse":"$(WarehouseDatabaseName)","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"SqlTask","DeploymentAction":"Publish","DacpacFile":"","SqlFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/PreCompareMain.sql","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"-v ScriptsBasePath=\"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/\" -Verbose","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Deploy Database Changes","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"$(WarehouseServerFqdn)","DataWarehouse":"$(WarehouseDatabaseName)","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/AdventureWorksDW.dacpac","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"/p:BlockOnPossibleDataLoss=False","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Pause Provisioned SQL Pool","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nSuspend-AzSqlDatabase  –ResourceGroupName \"$(ResourceGroupName)\" –ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":true},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":89,"url":"https://vsrm.dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_apis/Release/releases/89","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":{"isEnabled":false,"timeout":1440,"samplingInterval":15,"stabilizationTime":5,"minimumSuccessDuration":0},"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/romedei/_apis/public/Release/badge/495e559c-1bef-49f9-a210-c1eb66e31bc8/3/4"},{"id":6,"name":"test","rank":2,"owner":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"variables":{"EnvironmentName":{"value":"test"},"ResourceGroupName":{"value":"modern-data-$(EnvironmentName)"},"ResourceRegion":{"value":"East US"},"ResourceRegionShort":{"value":"eastus"},"WarehouseAdminPassword":{"value":null,"isSecret":true},"WarehouseAdminUserName":{"value":"sql.admin"},"WarehouseDatabaseName":{"value":"AdventureWorksDW"},"WarehouseServerFqdn":{"value":"sql-$(EnvironmentName).database.windows.net"},"WarehouseServerName":{"value":"sql-$(EnvironmentName)"},"WarehouseSkuName":{"value":"DataWarehouse"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"id":21}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":29},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":36}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":36,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Logical Server","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-serverName $(WarehouseServerName) -administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -enableADS false -allowAzureIPs true -connectionType \"Default\" -location \"$(ResourceRegionShort)\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Resume Provisioned SQL Pool if it Exists","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nResume-AzSqlDatabase –ResourceGroupName \"$(ResourceGroupName)\" –ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\"","ScriptArguments":"","errorActionPreference":"silentlyContinue","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Provisioned SQL Pool","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlPool/template.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -databaseName $(WarehouseDatabaseName) -skuName $(WarehouseSkuName) -location $(ResourceRegionShort) -serverName $(WarehouseServerName) -version 12.0 -collation SQL_Latin1_General_CP1_CI_AS -allowAzureIps true -databaseTags {} -serverTags {}","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Create Point in Time Restore","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nNew-AzSqlDatabaseRestorePoint -ResourceGroupName \"$(ResourceGroupName)\" -ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\" -RestorePointLabel \"Release-$(Build.BuildId)-RestorePoint\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Run Pre-Compare Script","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"sql-dev-01.database.windows.net","DataWarehouse":"AdventureWorksDW","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"SqlTask","DeploymentAction":"Publish","DacpacFile":"","SqlFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/PreCompareMain.sql","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"-v ScriptsBasePath=\"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/\" -Verbose","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Deploy Database Changes","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"sql-dev-01.database.windows.net","DataWarehouse":"AdventureWorksDW","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/AdventureWorksDW.dacpac","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"/p:BlockOnPossibleDataLoss=False","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Pause Provisioned SQL Pool","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nSuspend-AzSqlDatabase  –ResourceGroupName \"$(ResourceGroupName)\" –ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://vsrm.dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":27,"gatesOptions":{"isEnabled":true,"timeout":1440,"samplingInterval":15,"stabilizationTime":5,"minimumSuccessDuration":0},"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/romedei/_apis/public/Release/badge/495e559c-1bef-49f9-a210-c1eb66e31bc8/3/6"},{"id":7,"name":"prod","rank":3,"owner":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"variables":{"EnvironmentName":{"value":"prod-usa"},"ResourceGroupName":{"value":"modern-data-$(EnvironmentName)"},"ResourceRegion":{"value":"East US"},"ResourceRegionShort":{"value":"eastus"},"WarehouseAdminPassword":{"value":null,"isSecret":true},"WarehouseAdminUserName":{"value":"sql.admin"},"WarehouseDatabaseName":{"value":"AdventureWorksDW"},"WarehouseServerFqdn":{"value":"sql-$(EnvironmentName).database.windows.net"},"WarehouseServerName":{"value":"sql-$(EnvironmentName)"},"WarehouseSkuName":{"value":"DataWarehouse"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Rodrigo Medeiros","url":"https://spsprodcus2.vssps.visualstudio.com/A617b15a7-a651-4834-aba4-1d29e09ab0f1/_apis/Identities/cff408a0-f706-6ee4-9713-ac50e2e02b33","_links":{"avatar":{"href":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"}},"id":"cff408a0-f706-6ee4-9713-ac50e2e02b33","uniqueName":"romedei@microsoft.com","imageUrl":"https://dev.azure.com/romedei/_apis/GraphProfile/MemberAvatars/aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz","descriptor":"aad.Y2ZmNDA4YTAtZjcwNi03ZWU0LTk3MTMtYWM1MGUyZTAyYjMz"},"id":22}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":31},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":34}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":36,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Logical Server","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-serverName $(WarehouseServerName) -administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -enableADS false -allowAzureIPs true -connectionType \"Default\" -location \"$(ResourceRegionShort)\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Deploy Provisioned SQL Pool","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","action":"Create Or Update Resource Group","resourceGroupName":"$(ResourceGroupName)","location":"$(ResourceRegion)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlPool/template.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/ArmTemplates/SqlServer/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(WarehouseAdminUserName) -administratorLoginPassword $(WarehouseAdminPassword) -databaseName $(WarehouseDatabaseName) -skuName $(WarehouseSkuName) -location $(ResourceRegionShort) -serverName $(WarehouseServerName) -version 12.0 -collation SQL_Latin1_General_CP1_CI_AS -allowAzureIps true -databaseTags {} -serverTags {}","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"4.*","name":"Create Point in Time Restore","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","ScriptType":"InlineScript","ScriptPath":"","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments\nNew-AzSqlDatabaseRestorePoint -ResourceGroupName \"$(ResourceGroupName)\" -ServerName \"$(WarehouseServerName)\" -DatabaseName \"$(WarehouseDatabaseName)\" -RestorePointLabel \"Release-$(Build.BuildId)-RestorePoint\"","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"OtherVersion","CustomTargetAzurePs":"3.1.0","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Run Pre-Compare Script","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"sql-dev-01.database.windows.net","DataWarehouse":"AdventureWorksDW","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"SqlTask","DeploymentAction":"Publish","DacpacFile":"","SqlFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/PreCompareMain.sql","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"-v ScriptsBasePath=\"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/Scripts/\" -Verbose","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"2d429209-58fb-4a53-83ad-9cf58807b56c","version":"1.*","name":"Deploy Database Changes","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"64acf3eb-396d-48ac-8cf2-9060c5175ba7","AuthenticationType":"server","ServerName":"sql-dev-01.database.windows.net","DataWarehouse":"AdventureWorksDW","SqlUsername":"$(WarehouseAdminUserName)","SqlPassword":"$(WarehouseAdminPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_AdventureWorksDW/drop/AdventureWorksDW.dacpac","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"/p:BlockOnPossibleDataLoss=False","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://vsrm.dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"testing"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":28,"gatesOptions":{"isEnabled":true,"timeout":1440,"samplingInterval":15,"stabilizationTime":5,"minimumSuccessDuration":0},"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/romedei/_apis/public/Release/badge/495e559c-1bef-49f9-a210-c1eb66e31bc8/3/7"}],"artifacts":[{"sourceId":"495e559c-1bef-49f9-a210-c1eb66e31bc8:6","type":"Build","alias":"_AdventureWorksDW","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/romedei/_permalink/_build/index?collectionId=4b08dadb-0427-4fa4-a63a-b635e87c519e&projectId=495e559c-1bef-49f9-a210-c1eb66e31bc8&definitionId=6","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"6","name":"AdventureWorksDW"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"495e559c-1bef-49f9-a210-c1eb66e31bc8","name":"Demo-Modern-Data"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"_AdventureWorksDW","triggerConditions":[],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":3,"name":"AdventureWorksDW-rp","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_apis/Release/definitions/3","_links":{"self":{"href":"https://vsrm.dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_apis/Release/definitions/3"},"web":{"href":"https://dev.azure.com/romedei/495e559c-1bef-49f9-a210-c1eb66e31bc8/_release?definitionId=3"}}}